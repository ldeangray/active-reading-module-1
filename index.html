<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Active Reading Module 1 ‚Äì Central Idea</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
      color: #222;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      padding: 16px;
    }
    .app-shell {
      width: 100%;
      max-width: 900px;
      background: #ffffff;
      border-radius: 16px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.08);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      min-height: 0;
    }
    header {
      background: linear-gradient(135deg, #6366f1 0%, #ec4899 50%, #facc15 100%);
      color: white;
      padding: 18px 20px;
    }
    header h1 {
      font-size: 1.4rem;
      margin-bottom: 4px;
    }
    header p {
      font-size: 0.9rem;
      opacity: 0.9;
    }
    main {
      padding: 18px 20px 20px;
      flex: 1;
      overflow-y: auto;
    }
    h2 {
      font-size: 1.2rem;
      margin-bottom: 10px;
      color: #111827;
    }
    .card {
      border-radius: 12px;
      padding: 14px 16px;
      background: #f9fafb;
      border: 1px solid #e5e7eb;
      margin-bottom: 14px;
    }
    label {
      font-size: 0.9rem;
      display: block;
      margin-bottom: 4px;
    }
    input, select {
      width: 100%;
      padding: 8px 10px;
      font-size: 0.95rem;
      border-radius: 8px;
      border: 1px solid #d1d5db;
      margin-bottom: 10px;
    }
    .btn {
      border-radius: 999px;
      border: none;
      padding: 10px 18px;
      font-size: 0.95rem;
      cursor: pointer;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    .btn-primary {
      background: linear-gradient(135deg, #6366f1 0%, #ec4899 100%);
      color: white;
    }
    .btn-secondary {
      background: #e5e7eb;
      color: #111827;
    }
    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
      flex-wrap: wrap;
    }
    .pill {
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 0.8rem;
      background: #eef2ff;
      color: #4338ca;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    .pill span {
      font-size: 1rem;
    }
    .progress {
      width: 120px;
      height: 8px;
      background: #e5e7eb;
      border-radius: 999px;
      overflow: hidden;
    }
    .progress-inner {
      height: 100%;
      background: linear-gradient(90deg, #22c55e, #facc15);
      width: 0%;
      transition: width 0.2s ease-out;
    }
    .passage-box {
      border-radius: 12px;
      padding: 12px 14px;
      background: #fefce8;
      border: 1px solid #facc15;
      margin-bottom: 12px;
      font-size: 0.95rem;
      line-height: 1.6;
    }
    .highlight-toolbar {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 8px;
    }
    .hl-chip {
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 0.8rem;
      border: 1px solid transparent;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    .hl-chip span.swatch {
      width: 14px;
      height: 14px;
      border-radius: 999px;
      display: inline-block;
    }
    .hl-chip.active {
      border-color: #111827;
      background: #e5e7eb;
    }
    .hl-evidence {
      background: rgba(59, 130, 246, 0.22);
      box-shadow: inset 0 -2px 0 rgba(37, 99, 235, 0.5);
    }
    .hl-newword {
      background: rgba(236, 72, 153, 0.22);
      box-shadow: inset 0 -2px 0 rgba(219, 39, 119, 0.6);
    }
    .hl-mainidea {
      background: rgba(250, 204, 21, 0.35);
      box-shadow: inset 0 -2px 0 rgba(202, 138, 4, 0.7);
    }
    .sentence {
      cursor: pointer;
      padding: 0 1px;
      border-radius: 4px;
    }
    .sentence + .sentence {
      margin-left: 2px;
    }
    .question-box {
      margin-top: 10px;
    }
    .question-text {
      font-size: 0.98rem;
      margin-bottom: 8px;
      font-weight: 600;
    }
    .choices {
      list-style: none;
      margin-left: 0;
    }
    .choices li {
      margin-bottom: 6px;
    }
    .choices label {
      display: flex;
      gap: 8px;
      align-items: flex-start;
      cursor: pointer;
      font-size: 0.95rem;
    }
    .feedback {
      margin-top: 8px;
      border-radius: 8px;
      padding: 8px 10px;
      font-size: 0.9rem;
    }
    .feedback.correct {
      background: #ecfdf3;
      border: 1px solid #4ade80;
      color: #166534;
    }
    .feedback.incorrect {
      background: #fef2f2;
      border: 1px solid #fca5a5;
      color: #991b1b;
    }
    .results-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      font-size: 0.9rem;
    }
    .results-table th, .results-table td {
      border: 1px solid #e5e7eb;
      padding: 6px 8px;
      text-align: left;
    }
    .results-table th {
      background: #f9fafb;
      font-weight: 600;
    }
    .tag {
      display: inline-flex;
      padding: 4px 8px;
      border-radius: 999px;
      font-size: 0.75rem;
      background: #eef2ff;
      color: #4338ca;
      margin-right: 4px;
      margin-bottom: 4px;
    }
    .tiny-label {
      font-size: 0.78rem;
      color: #6b7280;
      margin-bottom: 2px;
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <header>
      <h1>Active Reading ‚Äì Module 1</h1>
      <p>Central Idea &amp; Text Evidence ‚Ä¢ MAP RIT 200‚Äì225 Focus</p>
    </header>

    <main>
      <!-- SCREEN: STUDENT INFO -->
      <section id="screen-student-info">
        <h2>Step 1: Tell me who you are üìù</h2>
        <p style="font-size:0.9rem; color:#4b5563; margin-bottom:10px;">
          Fill this out once. Your name, class period, and date will show on your results.
        </p>
        <div class="card">
          <label for="studentName">Student Name</label>
          <input id="studentName" type="text" placeholder="First and last name" />

          <label for="classPeriod">Class Period</label>
          <select id="classPeriod">
            <option value="">Select your class...</option>
            <option value="Period 1 (Red)">Period 1 (Red)</option>
            <option value="Period 2 (Blue)">Period 2 (Blue)</option>
            <option value="Period 3 (Red)">Period 3 (Red)</option>
            <option value="Period 4 (Blue)">Period 4 (Blue)</option>
            <option value="Period 6 (Blue)">Period 6 (Blue)</option>
          </select>

          <label for="sessionDate">Date</label>
          <input id="sessionDate" type="date" />

          <div style="margin-top:8px;">
            <div class="tiny-label">Module</div>
            <div class="pill">
              <span>üìö</span>
              <span>Module 1 ‚Äì Central Idea</span>
            </div>
          </div>

          <button id="startLessonBtn" class="btn btn-primary" style="margin-top:14px;">
            Start Lesson üöÄ
          </button>
        </div>
      </section>

      <!-- SCREEN: LESSON (WELCOME + PASSAGE + QUESTIONS + RESULTS) -->
      <section id="screen-lesson" style="display:none;">
        <div class="top-bar">
          <div class="pill">
            <span>‚≠ê</span>
            <span id="pointsDisplay">0 pts</span>
          </div>
          <div class="pill">
            <span>üôã‚Äç‚ôÄÔ∏è</span>
            <span id="studentSummaryLabel">Student: ‚Äî</span>
          </div>
          <div class="progress">
            <div id="progressInner" class="progress-inner"></div>
          </div>
        </div>

        <div id="lessonScreenContent">
          <!-- this will be swapped between:
               - welcome
               - passage / highlight practice
               - question screens
               - final results -->
        </div>
      </section>
    </main>
  </div>

  <script>
    // --- STATE ---
    const MODULE_NAME = "Module 1 ‚Äì Central Idea";

    let studentInfo = {
      name: "",
      period: "",
      date: "",
      module: MODULE_NAME
    };

    const questions = [
      {
        id: 1,
        skill: "Central Idea",
        text: "What is the central idea of the passage \"Building Bridges\"?",
        choices: [
          "Teens have no power to influence decisions in their communities.",
          "When teens share their experiences, they can help schools and towns become more welcoming to immigrant families.",
          "Immigrant students should stay quiet so they don‚Äôt cause conflict.",
          "Technology is the only way for teens to talk about social issues."
        ],
        correctIndex: 1,
        rationaleCorrect:
          "Yes. The passage focuses on how teen voices and stories help adults design more welcoming spaces for immigrant families.",
        rationaleIncorrect:
          "Look back at the whole passage. Ask: what idea is repeated in the beginning, middle, and end? It's about teen voices making communities more welcoming."
      },
      {
        id: 2,
        skill: "Supporting Evidence",
        text: "Which sentence best supports the central idea?",
        choices: [
          "\"Some students still felt like they were carrying two worlds on their backs.\"",
          "\"At first, the meetings were awkward and quiet.\"",
          "\"Little by little, their stories became the blueprint for new welcome programs, translated signs, and parent nights with interpreters.\"",
          "\"The town‚Äôs traffic always seemed loudest right after school.\""
        ],
        correctIndex: 2,
        rationaleCorrect:
          "Yes. This sentence shows how student stories led directly to changes that made the community more welcoming.",
        rationaleIncorrect:
          "Try again. Which sentence shows that student stories actually changed something in the school or town?"
      },
      {
        id: 3,
        skill: "Central Idea (Paragraph)",
        text: "What is the central idea of paragraph 2?",
        choices: [
          "The students were bored during the first few meetings.",
          "Sharing stories helped students realize they had similar questions and worries.",
          "Only immigrant students were invited to the meetings.",
          "Teachers never listened to student opinions before."
        ],
        correctIndex: 1,
        rationaleCorrect:
          "Right. Paragraph 2 focuses on how sharing stories helped students see their common experiences.",
        rationaleIncorrect:
          "Reread paragraph 2. Ask: what new understanding do the students get by the end of that paragraph?"
      },
      {
        id: 4,
        skill: "Inference",
        text: "What can you infer about the adults running the project?",
        choices: [
          "They believed students‚Äô voices were important in solving real problems.",
          "They only cared about getting good test scores.",
          "They wanted students to stop talking about immigration.",
          "They thought technology was more important than people."
        ],
        correctIndex: 0,
        rationaleCorrect:
          "Exactly. The adults created spaces for students to share stories and then used those stories to make changes.",
        rationaleIncorrect:
          "Think: would adults who didn‚Äôt care about student voices spend time listening and changing programs based on what students said?"
      },
      {
        id: 5,
        skill: "Main Idea vs. Detail",
        text: "Which statement is a main idea, not just a small detail?",
        choices: [
          "Some meetings were held on Thursday afternoons.",
          "Student stories helped the town design better supports for immigrant families.",
          "One student talked about missing her grandmother‚Äôs cooking.",
          "The flyers were printed in three different languages."
        ],
        correctIndex: 1,
        rationaleCorrect:
          "Yes. This sentence sums up a big idea from across the passage, not just one small moment.",
        rationaleIncorrect:
          "Ask yourself: does this sentence cover a big idea from the whole passage, or is it just one small example?"
      }
    ];

    let currentQuestionIndex = -1; // -1 = not in quiz yet
    let totalPoints = 0;
    let numCorrect = 0;
    let answersRecord = [];

    // --- DOM SHORTCUTS ---
    const $ = (id) => document.getElementById(id);

    const screenStudentInfo = $("screen-student-info");
    const screenLesson = $("screen-lesson");
    const startLessonBtn = $("startLessonBtn");
    const studentNameInput = $("studentName");
    const classPeriodSelect = $("classPeriod");
    const sessionDateInput = $("sessionDate");
    const lessonScreenContent = $("lessonScreenContent");
    const pointsDisplay = $("pointsDisplay");
    const studentSummaryLabel = $("studentSummaryLabel");
    const progressInner = $("progressInner");

    // --- INITIALIZE DATE + TRY LOADED STUDENT DATA ---
    document.addEventListener("DOMContentLoaded", () => {
      // Default date = today
      const today = new Date();
      const yyyy = today.getFullYear();
      const mm = String(today.getMonth() + 1).padStart(2, "0");
      const dd = String(today.getDate()).padStart(2, "0");
      sessionDateInput.value = `${yyyy}-${mm}-${dd}`;

      // Try to load from localStorage
      try {
        const stored = JSON.parse(localStorage.getItem("activeReadingStudentInfo"));
        if (stored && stored.name) {
          studentInfo = { ...studentInfo, ...stored };
          studentNameInput.value = stored.name || "";
          classPeriodSelect.value = stored.period || "";
          if (stored.date) sessionDateInput.value = stored.date;
        }
      } catch (e) {
        console.warn("No stored student info yet.");
      }

      renderWelcomeScreen();
    });

    // --- START LESSON BUTTON ---
    startLessonBtn.addEventListener("click", () => {
      const name = studentNameInput.value.trim();
      const period = classPeriodSelect.value;
      const date = sessionDateInput.value;

      if (!name || !period || !date) {
        alert("Please fill in your name, class period, and date before starting.");
        return;
      }

      studentInfo = { name, period, date, module: MODULE_NAME };

      // Save to localStorage so it auto-fills next time
      localStorage.setItem("activeReadingStudentInfo", JSON.stringify(studentInfo));

      // Update header pill
      studentSummaryLabel.textContent =
        `${studentInfo.name} ‚Ä¢ ${studentInfo.period} ‚Ä¢ ${studentInfo.date}`;

      // Swap screens
      screenStudentInfo.style.display = "none";
      screenLesson.style.display = "block";

      // Initial view: welcome screen (not quiz yet)
      currentQuestionIndex = -1;
      totalPoints = 0;
      numCorrect = 0;
      answersRecord = [];
      updateProgress();
      renderWelcomeScreen();
      updatePointsDisplay();
    });

    // --- RENDER FUNCTIONS ---

    function updatePointsDisplay() {
      pointsDisplay.textContent = `${totalPoints} pts`;
    }

    function updateProgress() {
      // -1 means we‚Äôre still on welcome / passage screens (0%)
      // 0..questions.length-1 = progress
      const total = questions.length;
      const step = currentQuestionIndex + 1; // so first question gives a little bar
      const pct = currentQuestionIndex < 0 ? 0 : (step / total) * 100;
      progressInner.style.width = pct + "%";
    }

    function renderWelcomeScreen() {
      lessonScreenContent.innerHTML = `
        <div class="card">
          <h2>Welcome, ${studentInfo.name || "reader"} üëã</h2>
          <p style="font-size:0.95rem; color:#4b5563; margin-top:6px;">
            Today you'll practice <strong>finding the central idea</strong> of a passage
            and <strong>highlighting the best text evidence</strong> to support it.
          </p>
          <ul style="margin-top:10px; font-size:0.9rem; color:#4b5563; padding-left:18px;">
            <li>First, you'll read a short passage and try out color-coded highlighting.</li>
            <li>Then you'll answer <strong>5 multiple-choice questions</strong>, one at a time.</li>
            <li>You earn <strong>20 points</strong> for each correct answer.</li>
          </ul>
          <p style="margin-top:10px; font-size:0.9rem; color:#4b5563;">
            Highlighting key parts of the passage makes it easier to see the central idea.
          </p>
          <button class="btn btn-primary" style="margin-top:12px;" onclick="renderPassageScreen()">
            Start Reading üìñ
          </button>
        </div>
      `;
    }

    function renderPassageScreen() {
      currentQuestionIndex = -1;
      updateProgress();

      const passageHtml = `
        <p>
          <span class="sentence" data-sentence="1">
            After school on Thursdays, a group of students met in the library to talk about what it felt like to grow up between countries.
          </span>
          <span class="sentence" data-sentence="2">
            Some had moved to the United States only months ago; others were born here but spoke another language at home.
          </span>
          <span class="sentence" data-sentence="3">
            Their families came from El Salvador, Afghanistan, Ethiopia, and many other places, yet they all noticed the same thing‚Äîschool was not always designed with them in mind.
          </span>
        </p>
        <p>
          <span class="sentence" data-sentence="4">
            At first, the meetings were quiet and awkward.
          </span>
          <span class="sentence" data-sentence="5">
            Students stared at the table or scrolled on their phones while the adults asked broad questions like, ‚ÄúHow can we make our school more welcoming?‚Äù
          </span>
          <span class="sentence" data-sentence="6">
            Little by little, however, someone would share a story about not understanding a field trip form, or feeling invisible when classmates joked about immigrants.
          </span>
          <span class="sentence" data-sentence="7">
            Soon, other students began nodding, adding their own experiences and questions.
          </span>
        </p>
        <p>
          <span class="sentence" data-sentence="8">
            As the stories piled up, the adults started taking careful notes.
          </span>
          <span class="sentence" data-sentence="9">
            The students‚Äô ideas became the blueprint for translated signs in the main office, parent nights with interpreters, and a student-run ‚Äúwelcome crew‚Äù that helped new classmates find their way.
          </span>
          <span class="sentence" data-sentence="10">
            The project did not erase every problem, but it proved something powerful: when schools listen to the students who are most affected by a challenge, those students can help design the strongest solutions.
          </span>
        </p>
      `;

      lessonScreenContent.innerHTML = `
        <div class="card">
          <h2>Passage: Building Bridges</h2>
          <p style="font-size:0.85rem; color:#6b7280; margin-top:2px;">
            Use the color-coded highlighting practice before you answer questions.
          </p>

          <div class="highlight-toolbar" style="margin-top:10px;">
            <div class="hl-chip active" data-mode="mainidea" onclick="setHighlightMode('mainidea', this)">
              <span class="swatch" style="background:#facc15;"></span>
              <span>Central Idea (Yellow)</span>
            </div>
            <div class="hl-chip" data-mode="evidence" onclick="setHighlightMode('evidence', this)">
              <span class="swatch" style="background:#3b82f6;"></span>
              <span>Text Evidence (Blue)</span>
            </div>
            <div class="hl-chip" data-mode="newword" onclick="setHighlightMode('newword', this)">
              <span class="swatch" style="background:#ec4899;"></span>
              <span>New / Unknown Words (Pink)</span>
            </div>
          </div>

          <div id="passageBox" class="passage-box">
            ${passageHtml}
          </div>

          <p style="font-size:0.85rem; color:#4b5563; margin-top:8px;">
            üëâ Tap a sentence to mark it with the current color. Tap again to clear it.
          </p>

          <button class="btn btn-primary" style="margin-top:10px;" onclick="startQuestionFlow()">
            I'm ready for questions ‚û°Ô∏è
          </button>
        </div>
      `;

      // attach click handlers to sentences
      const sentenceSpans = document.querySelectorAll("#passageBox .sentence");
      sentenceSpans.forEach((span) => {
        span.addEventListener("click", () => toggleHighlight(span));
      });
    }

    let currentHighlightMode = "mainidea";

    function setHighlightMode(mode, el) {
      currentHighlightMode = mode;
      const chips = document.querySelectorAll(".hl-chip");
      chips.forEach((chip) => chip.classList.remove("active"));
      if (el) el.classList.add("active");
    }

    function toggleHighlight(span) {
      span.classList.remove("hl-mainidea", "hl-evidence", "hl-newword");
      const already = span.dataset.hl === currentHighlightMode;
      if (already) {
        span.dataset.hl = "";
        return;
      }
      span.dataset.hl = currentHighlightMode;
      if (currentHighlightMode === "mainidea") span.classList.add("hl-mainidea");
      if (currentHighlightMode === "evidence") span.classList.add("hl-evidence");
      if (currentHighlightMode === "newword") span.classList.add("hl-newword");
    }

    function startQuestionFlow() {
      currentQuestionIndex = 0;
      numCorrect = 0;
      totalPoints = 0;
      answersRecord = [];
      updateProgress();
      updatePointsDisplay();
      renderCurrentQuestion();
    }

    function renderCurrentQuestion() {
      const q = questions[currentQuestionIndex];
      const total = questions.length;
      const qNumber = currentQuestionIndex + 1;

      const choicesHtml = q.choices
        .map((choice, idx) => {
          const letter = String.fromCharCode(65 + idx); // A, B, C...
          return `
            <li>
              <label>
                <input type="radio" name="choice" value="${idx}" />
                <strong>${letter}.</strong> ${choice}
              </label>
            </li>
          `;
        })
        .join("");

      lessonScreenContent.innerHTML = `
        <div class="card question-box">
          <div style="display:flex; justify-content:space-between; align-items:center; gap:8px; margin-bottom:6px;">
            <h2>Question ${qNumber} of ${total}</h2>
            <span class="tag">${q.skill}</span>
          </div>
          <p class="question-text">${q.text}</p>
          <ul class="choices">
            ${choicesHtml}
          </ul>
          <div id="feedbackBox"></div>
          <div style="display:flex; gap:8px; margin-top:10px; flex-wrap:wrap;">
            <button class="btn btn-primary" onclick="checkAnswer()">
              Check Answer ‚úÖ
            </button>
            <button class="btn btn-secondary" onclick="goBackToPassage()">
              Look at Passage Again üìñ
            </button>
          </div>
        </div>
      `;
    }

    function getSelectedChoiceIndex() {
      const nodes = document.querySelectorAll('input[name="choice"]');
      for (let i = 0; i < nodes.length; i++) {
        if (nodes[i].checked) return parseInt(nodes[i].value, 10);
      }
      return -1;
    }

    function checkAnswer() {
      const q = questions[currentQuestionIndex];
      const choiceIndex = getSelectedChoiceIndex();
      const feedbackBox = $("feedbackBox");

      if (choiceIndex === -1) {
        alert("Please choose an answer first.");
        return;
      }

      const isCorrect = choiceIndex === q.correctIndex;
      if (isCorrect) {
        numCorrect++;
        totalPoints += 20;
        updatePointsDisplay();
        feedbackBox.className = "feedback correct";
        feedbackBox.textContent = q.rationaleCorrect;
      } else {
        feedbackBox.className = "feedback incorrect";
        feedbackBox.textContent = q.rationaleIncorrect;
      }

      // Record answer
      answersRecord.push({
        questionId: q.id,
        skill: q.skill,
        correct: isCorrect
      });

      // Replace buttons with "Next" or "See results"
      const btnAreaHtml = `
        <div style="display:flex; gap:8px; margin-top:10px; flex-wrap:wrap;">
          ${
            currentQuestionIndex < questions.length - 1
              ? `<button class="btn btn-primary" onclick="goToNextQuestion()">Next Question ‚û°Ô∏è</button>`
              : `<button class="btn btn-primary" onclick="showResults()">See My Results üéâ</button>`
          }
        </div>
      `;
      feedbackBox.insertAdjacentHTML("afterend", btnAreaHtml);

      // Disable the old buttons
      const buttons = document.querySelectorAll(".question-box .btn");
      buttons.forEach((b) => (b.disabled = true));
    }

    function goToNextQuestion() {
      currentQuestionIndex++;
      updateProgress();
      renderCurrentQuestion();
    }

    function goBackToPassage() {
      renderPassageScreen();
    }

    function showResults() {
      updateProgress();
      const totalQuestions = questions.length;
      const pct = Math.round((numCorrect / totalQuestions) * 100);

      const rowsHtml = answersRecord
        .map((rec, idx) => {
          const status = rec.correct ? "‚úÖ" : "‚ùå";
          return `
            <tr>
              <td>${idx + 1}</td>
              <td>${rec.skill}</td>
              <td>${status}</td>
            </tr>
          `;
        })
        .join("");

      lessonScreenContent.innerHTML = `
        <div class="card">
          <h2>Great work, ${studentInfo.name}! üéâ</h2>
          <p style="margin-top:6px; font-size:0.95rem; color:#4b5563;">
            Here is your summary. Show this to your teacher or enter it in the Google Form.
          </p>

          <div style="margin-top:10px; font-size:0.9rem; color:#374151;">
            <p><strong>Name:</strong> ${studentInfo.name}</p>
            <p><strong>Class Period:</strong> ${studentInfo.period}</p>
            <p><strong>Date:</strong> ${studentInfo.date}</p>
            <p><strong>Module:</strong> ${studentInfo.module}</p>
            <p style="margin-top:4px;">
              <strong>Score:</strong> ${numCorrect} / ${totalQuestions} (${pct}%)
              &nbsp;‚Ä¢&nbsp;
              <strong>Total Points:</strong> ${totalPoints}
            </p>
          </div>

          <table class="results-table">
            <thead>
              <tr>
                <th>#</th>
                <th>Skill</th>
                <th>Correct?</th>
              </tr>
            </thead>
            <tbody>
              ${rowsHtml}
            </tbody>
          </table>

          <p style="margin-top:8px; font-size:0.85rem; color:#4b5563;">
            üîÅ You can refresh the page to try again, or move on when your teacher says so.
          </p>

          <button class="btn btn-secondary" style="margin-top:10px;" onclick="restartModule()">
            Restart Module üîÑ
          </button>
        </div>
      `;
    }

    function restartModule() {
      totalPoints = 0;
      numCorrect = 0;
      answersRecord = [];
      currentQuestionIndex = -1;
      updatePointsDisplay();
      updateProgress();
      renderWelcomeScreen();
    }
  </script>
</body>
</html>
